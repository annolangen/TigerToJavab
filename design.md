# Design of TigerToJavab

This document describes the high-level design and architecture of the `TigerToJavab` compiler. The goal of this project is to compile source code written in the Tiger language into Java bytecode.

## 1. Compiler Architecture

The compiler follows a traditional multi-pass design, separating the frontend (language analysis) from the backend (code generation).

### 1.1. Frontend

The frontend is responsible for parsing the Tiger source code and transforming it into an intermediate representation, likely an Abstract Syntax Tree (AST).

- **Lexical Analysis (Lexing)**: The project uses `flex` to generate the lexical analyzer. The lexer's role is to read the Tiger source code and convert the stream of characters into a stream of tokens (e.g., identifiers, keywords, operators).

- **Syntactic Analysis (Parsing)**: The project uses `bison` to generate the parser. The parser consumes the token stream from the lexer and verifies that it conforms to the Tiger language's grammar. As it parses, it constructs an Abstract Syntax Tree (AST) that represents the structure of the program.

- **Semantic Analysis**: After the AST is built, a semantic analysis pass (or multiple passes) will traverse the tree to check for semantic correctness. This includes tasks like type checking, ensuring variables are declared before use, and other language-specific rules.

### 1.2. Backend

The backend is responsible for taking the verified AST from the frontend and generating executable code for the target platform.

- **Target Platform**: The chosen target is the **Java Virtual Machine (JVM)**.

- **Code Generation**: The compiler will generate **Java bytecode**. This process involves translating the high-level constructs from the AST into the low-level instruction set of the JVM. The output will be standard `.class` files that can be executed by any Java runtime.

## 2. Technology Stack

- **Core Language**: C++ (to be modernized to C++17/20).
- **Build System**: `CMake` is used to manage the build process and dependencies.
- **Parser/Lexer Generators**: `flex` and `bison` are used for the frontend.
- **Dependencies**: The development environment requires:
  - A C++ compiler (e.g., `clang`)
  - `make` and `cmake`
  - `flex` and `bison`
  - A Java Development Kit (`default-jdk-headless`) for running and testing the generated bytecode.

## 3. Testing

The project includes an integrated testing framework, invoked via `make test`. The testing infrastructure code is located in `src/testing/`. This setup is intended to validate the compiler's output against a set of known Tiger programs.
